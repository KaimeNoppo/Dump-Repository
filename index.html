<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BlockCraft Emporium</title>
    <meta name="description" content="Your Minecraft dream store!">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Index Header -->
    <header id="top">
        <div class="wrap">
            <a class="brand" href="index.html">
                <img src="images/logo.png" alt="BlockCraft Logo" class="logo">
                <b>BlockCraft Emporium</b>
            </a>

            <!-- Navigation Links -->
            <nav>
                <a class="btn" href="product.html">Products</a>
                <a class="btn" href="about.html">About</a>
                <a class="btn" href="#showcase">Showcase</a>
            </nav>
            <!-- Cart indicator (visual) -->
            <div class="cart-indicator" aria-hidden="false">
                <button class="cart-btn" aria-label="Open cart"><span class="cart-icon">üõí</span> <span class="cart-count">0</span></button>
            </div>
        </div>
    </header>

    <!-- Index Hero Section -->
    <main>
        <section class="hero">
            <h1>Welcome to BlockCraft Emporium!</h1>
            <p>Your one-stop shop for Minecraft gear and goodies.</p>
            <div class="cta">
                <a class="btn" href="#products">See Products</a>
                <a class="btn" href="#showcase">Explore Builds</a>
            </div>
        </section>

        <!-- New: Features / Highlights -->
        <section class="features" id="features" aria-label="Why shop with us">
            <div class="inner">
                <h2 class="section-title">Why Shop With Us</h2>
                <p class="section-sub">Pixel-perfect products, crafted with care and built for players.</p>

                <div class="features-grid">
                    <div class="feature-card">
                        <div class="icon">‚öíÔ∏è</div>
                        <h3>Quality Materials</h3>
                        <p>Durable, hand-picked materials for long-lasting merch and accessories.</p>
                    </div>

                    <div class="feature-card">
                        <div class="icon">‚ôªÔ∏è</div>
                        <h3>Eco Packaging</h3>
                        <p>We use recycled and compostable packing to keep builds green IRL.</p>
                    </div>

                    <div class="feature-card">
                        <div class="icon">üöö</div>
                        <h3>Fast Local Shipping</h3>
                        <p>Reliable, tracked delivery across the Philippines ‚Äî straight to your base.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- New: Deals strip -->
        <section class="deals" id="deals" aria-label="Weekly deals">
            <div class="inner">
                <h2 class="section-title">Weekly Deals</h2>
                <p class="section-sub">Limited-time offers ‚Äî grab them before they're gone.</p>

                <div class="deals-row">
                    <article class="deal-card">
                        <div class="deal-thumb" aria-hidden="true">üó°Ô∏è</div>
                        <div class="deal-body">
                            <h3>Diamond Sword ‚Äî Promo</h3>
                            <div class="deal-meta">Now ‚Ç±450 (was ‚Ç±500)</div>
                        </div>
                        <div class="deal-cta">
                            <button class="add">Buy</button>
                        </div>
                    </article>

                    <article class="deal-card">
                        <div class="deal-thumb" aria-hidden="true">üíö</div>
                        <div class="deal-body">
                            <h3>Creeper Plush ‚Äî Bundle</h3>
                            <div class="deal-meta">2 for ‚Ç±600</div>
                        </div>
                        <div class="deal-cta">
                            <button class="add">Buy</button>
                        </div>
                    </article>

                    <article class="deal-card">
                        <div class="deal-thumb" aria-hidden="true">üîß</div>
                        <div class="deal-body">
                            <h3>Redstone Kit ‚Äî Discount</h3>
                            <div class="deal-meta">‚Ç±380 ‚Äî limited</div>
                        </div>
                        <div class="deal-cta">
                            <button class="add">Buy</button>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <!-- New: Community CTA -->
        <section class="community-cta" aria-label="Community call to action">
            <div class="inner">
                <h2 class="section-title">Join the BlockCraft Community</h2>
                <p class="section-sub">Share builds, enter contests, and get early access to drops.</p>
                <div class="cta">
                    <a class="btn" href="#newsletter">Join Newsletter</a>
                    <a class="btn" href="#showcase">Browse Builds</a>
                </div>
            </div>
        </section>

        <!-- Existing Products Section: centered, grouped, improved cards -->
        <section class="products-section" id="products">
            <div class="section-inner">
                <span class="products-title">Products</span>
                <div class="products-sub">Hand-picked Minecraft merch ‚Äî pixel-perfect quality</div>

                <div class="grid" role="list">
                    <article class="card" role="listitem">
                        <div class="badge">Popular</div>
                        <img src="images/diamond_sword.png" alt="Diamond Sword">
                        <div class="pad">
                            <h3 class="title">Diamond Sword</h3>
                            <p class="meta">Sharp and shiny!</p>
                            <div class="row">
                                <span class="price">‚Ç±500</span>
                                <button class="add" aria-label="Add Diamond Sword to cart">Add</button>
                            </div>
                        </div>
                    </article>

                    <article class="card" role="listitem">
                        <div class="badge">Limited</div>
                        <img src="images/creeper_plush.png" alt="Creeper Plush">
                        <div class="pad">
                            <h3 class="title">Creeper Plush</h3>
                            <p class="meta">Soft but explosive!</p>
                            <div class="row">
                                <span class="price">‚Ç±350</span>
                                <button class="add" aria-label="Add Creeper Plush to cart">Add</button>
                            </div>
                        </div>
                    </article>

                    <article class="card" role="listitem">
                        <div class="badge">New</div>
                        <img src="images/redstone_kit.png" alt="Redstone Kit">
                        <div class="pad">
                            <h3 class="title">Redstone Kit</h3>
                            <p class="meta">Power your builds.</p>
                            <div class="row">
                                <span class="price">‚Ç±420</span>
                                <button class="add" aria-label="Add Redstone Kit to cart">Add</button>
                            </div>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <!-- Showcase: blocky mosaic for builds -->
        <section class="showcase" id="showcase">
            <div class="inner">
                <h2 style="font-family: 'Orbitron', sans-serif; font-size:1.4rem;">Featured Builds</h2>
                <div class="products-sub">A quick look at creations made by our community</div>

                <div class="mosaic" aria-hidden="false">
                    <div class="tile" title="Castle build"><img src="images/build1.jpg" alt="Castle build"></div>
                    <div class="tile" title="Treehouse"><img src="images/build2.jpg" alt="Treehouse build"></div>
                    <div class="tile" title="Redstone farm"><img src="images/build3.jpg" alt="Redstone farm build"></div>
                    <div class="tile" title="Nether base"><img src="images/build4.jpg" alt="Nether base build"></div>
                    <div class="tile" title="Pixel art"><img src="images/build5.jpg" alt="Pixel art build"></div>
                    <div class="tile" title="Modern house"><img src="images/build6.jpg" alt="Modern house build"></div>
                </div>
            </div>
        </section>

        <!-- Testimonials -->
        <section class="testimonials" id="testimonials">
            <div class="inner">
                <div class="quote">
                    <p>"Bought the creeper plush for my kid ‚Äî it's adorable and super-soft. Shipping was fast!"</p>
                    <div class="who">‚Äî Ana P., Manila</div>
                </div>

                <div class="quote">
                    <p>"The redstone kit helped me automate my base in no time. Great quality and instructions."</p>
                    <div class="who">‚Äî Mark D., Cebu</div>
                </div>

                <div class="quote">
                    <p>"Amazing pixel-styled merch. The team really gets the aesthetic. Will shop again."</p>
                    <div class="who">‚Äî Juno R., Davao</div>
                </div>
            </div>
        </section>

        <!-- Newsletter CTA -->
        <section class="newsletter" id="newsletter">
            <div class="inner">
                <div style="text-align:left; min-width:260px;">
                    <div style="font-family:'Orbitron',sans-serif; font-size:1.1rem;">Join the BlockCraft Newsletter</div>
                    <div style="color:var(--muted); font-size:0.95rem;">Get updates on new drops, builds, and exclusive promos.</div>
                </div>

                <form onsubmit="subscribe(event)" style="display:flex; gap:10px; align-items:center;">
                    <input id="email" type="email" placeholder="you@example.com" required aria-label="Email address">
                    <button class="pixel-btn" type="submit">Subscribe</button>
                </form>
            </div>
        </section>

        <!-- About Section: centered and dynamic -->
        <section id="about" aria-label="About BlockCraft">
            <div class="about-card">
                <div class="about-text">
                    <h2>About Us</h2>
                    <div class="accent-line" aria-hidden="true"></div>
                    <p><b>Our Story:</b> BlockCraft Emporium was built by Minecraft fans who wanted to bring pixel-perfect joy to the real world.</p>
                    <ul class="about-list" aria-label="About highlights">
                        <li>100% Minecraft-inspired products</li>
                        <li>Eco-friendly packaging</li>
                        <li>Built by gamers, for gamers</li>
                        <li>Fast local shipping</li>
                    </ul>
                    <p style="margin-top:10px;"><b>Owner:</b> Rence</p>
                </div>

                <div class="about-profile" aria-hidden="false">
                    <img src="images/owner.png" alt="Rence's photo" class="owner">
                    <div class="owner-caption">Rence ‚Äî Founder & Creative Lead</div>
                </div>
            </div>
        </section>

    </main>

    <!-- Index Footer Section -->
    <footer>
        <div class="foot">
            <div class="left">¬© 2025 BlockCraft Emporium ‚Äî Owner: Clarence Magante</div>
            <div class="right"><a href="#top">Back to top ‚Üë</a></div>
        </div>
    </footer>

    <script>
        // Lightweight subscribe simulation (no backend) ‚Äî stores email to localStorage and shows a quick feedback
        function subscribe(e) {
            e.preventDefault();
            const email = document.getElementById('email').value.trim();
            if (!email) return;
            const list = JSON.parse(localStorage.getItem('bc_subs') || '[]');
            list.push({ email, date: new Date().toISOString() });
            localStorage.setItem('bc_subs', JSON.stringify(list));
            alert('Thanks ‚Äî you are subscribed!');
            <script>
          // Robust: force page to start at top and disable automatic restoration.
          // Add this once, just before </body> (replace existing scroll scripts).
            (function () {
                try {
                    if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
                } catch (e) { /* ignore */ }

                function goTop() {
                    window.scrollTo({ top: 0, left: 0, behavior: 'auto' });
                }

                // Ensure at very top on initial load / DOM ready
                document.addEventListener('DOMContentLoaded', goTop);

                // pageshow covers bfcache / back-forward cache restores
                window.addEventListener('pageshow', function (e) {
                    if (e.persisted) goTop();
                    // small delay to override any other script/anchor handling
                    setTimeout(goTop, 0);
                });

                // also on load (extra safety)
                window.addEventListener('load', function () {
                    setTimeout(goTop, 0);
                });

                // try to clear hash after we force scroll (optional ‚Äî keeps anchors working on explicit links)
                setTimeout(function () {
                    if (location.hash && location.hash !== '#top') {
                        // remove hash so the browser won't jump on reload (comment out if you rely on in-page anchors)
                        history.replaceState(null, '', location.pathname + location.search);
                    }
                }, 50);

                // try to reset scroll before navigation away
                window.addEventListener('beforeunload', function () {
                    try { window.scrollTo(0, 0); } catch (e) { /* ignore */ }
                });
            })();
            e.target.reset();
        }
             < !--Cart drawer + overlay-- >
     <div class="cart-overlay" id="cartOverlay" hidden></div>

     <aside class="cart-drawer" id="cartDrawer" aria-hidden="true">
         <header class="cart-header">
             <div class="cart-title">Your Cart</div>
             <button class="cart-close" aria-label="Close cart">‚úï</button>
         </header>

         <div class="cart-body" id="cartItems">
             <!-- Items populated by JS -->
             <div class="cart-empty">Your cart is empty.</div>
         </div>

         <footer class="cart-footer">
             <div class="cart-summary">
                 <div>Subtotal</div>
                 <div class="cart-subtotal">‚Ç±0</div>
             </div>
             <div class="cart-actions">
                 <button class="btn checkout-btn" id="checkoutBtn">Checkout</button>
                 <button class="btn ghost clear-cart-btn" id="clearCartBtn">Clear</button>
             </div>
         </footer>
     </aside>

     <footer>
         <div class="foot">
             <div>¬© 2025 BlockCraft Emporium ‚Äî Owner: Clarence Magante</div>
             <div class="right"><a href="#top">Back to top ‚Üë</a></div>
         </div>
     </footer>

     <script>
         const CART_KEY = 'bc_cart_v1';

         function getCart() {
             try { return JSON.parse(localStorage.getItem(CART_KEY) || '[]'); }
             catch { return []; }
         }

         function saveCart(cart) {
             localStorage.setItem(CART_KEY, JSON.stringify(cart));
             updateCartCount();
             renderCart();
         }

         function addToCart(item) {
             if (!item || !item.id) return;
             const cart = getCart();
             const existing = cart.find(i => i.id === item.id);
             if (existing) existing.qty = (existing.qty || 0) + (item.qty || 1);
             else cart.push({ id: item.id, title: item.title || '', price: Number(item.price) || 0, qty: item.qty || 1 });
             saveCart(cart);
         }

         function updateCartCount() {
             const cart = getCart();
             const totalQty = cart.reduce((s, i) => s + (i.qty || 0), 0);
             document.querySelectorAll('.cart-count').forEach(el => el.textContent = totalQty);
         }

         // get product DOM data (image/title/price) by id
         function getProductData(id) {
             const article = document.querySelector(`article[data-id="${id}"]`);
             if (!article) return {};
             const img = article.querySelector('img')?.getAttribute('src') || '';
             const title = article.querySelector('.title')?.textContent.trim() || id;
             const price = Number(article.dataset.price || (article.querySelector('.price')?.textContent.replace(/[^\d.]/g, '') || 0));
             return { id, img, title, price };
         }

         // Cart drawer controls
         const cartOverlay = document.getElementById('cartOverlay');
         const cartDrawer = document.getElementById('cartDrawer');

         function openCart() {
             cartOverlay.hidden = false;
             cartDrawer.setAttribute('aria-hidden', 'false');
             document.documentElement.style.overflow = 'hidden';
             setTimeout(() => {
                 cartOverlay.classList.add('visible');
                 cartDrawer.classList.add('open');
             }, 10);
             renderCart();
         }

         function closeCart() {
             cartDrawer.classList.remove('open');
             cartOverlay.classList.remove('visible');
             cartDrawer.setAttribute('aria-hidden', 'true');
             document.documentElement.style.overflow = '';
             setTimeout(() => cartOverlay.hidden = true, 280);
         }

         // render cart contents
         function renderCart() {
             const container = document.getElementById('cartItems');
             container.innerHTML = '';
             const cart = getCart();
             if (!cart.length) {
                 container.innerHTML = '<div class="cart-empty">Your cart is empty.</div>';
                 document.querySelector('.cart-subtotal').textContent = '‚Ç±0';
                 return;
             }

             let subtotal = 0;
             cart.forEach(item => {
                 const p = getProductData(item.id);
                 const line = document.createElement('div');
                 line.className = 'cart-item';
                 line.dataset.id = item.id;
                 const lineTotal = (item.price * (item.qty || 0));
                 subtotal += lineTotal;

                 line.innerHTML = `
                             <img src="${p.img}" alt="${item.title}" class="cart-item-thumb">
                             <div class="cart-item-meta">
                                 <div class="cart-item-title">${item.title}</div>
                                 <div class="cart-item-price">‚Ç±${item.price}</div>
                                 <div class="cart-item-controls">
                                     <button class="qty-btn qty-minus" aria-label="Decrease quantity">‚àí</button>
                                     <input class="qty-input" type="number" min="1" value="${item.qty}">
                                     <button class="qty-btn qty-plus" aria-label="Increase quantity">+</button>
                                     <button class="remove-btn" aria-label="Remove item">Remove</button>
                                 </div>
                             </div>
                             <div class="cart-item-total">‚Ç±${lineTotal}</div>
                         `;
                 container.appendChild(line);
             });

             document.querySelector('.cart-subtotal').textContent = `‚Ç±${subtotal}`;
         }

         // update quantity helper
         function updateCartItemQty(id, qty) {
             const cart = getCart();
             const item = cart.find(i => i.id === id);
             if (!item) return;
             item.qty = Math.max(1, Math.floor(qty));
             saveCart(cart);
         }

         function removeCartItem(id) {
             let cart = getCart();
             cart = cart.filter(i => i.id !== id);
             saveCart(cart);
         }

         function clearCart() {
             saveCart([]);
         }

         // wire cart button
         document.querySelectorAll('.cart-btn').forEach(btn => btn.addEventListener('click', openCart));
         cartOverlay.addEventListener('click', closeCart);
         document.querySelectorAll('.cart-close').forEach(b => b.addEventListener('click', closeCart));
         document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && cartDrawer.classList.contains('open')) closeCart(); });

         // delegated handlers inside drawer (qty change, remove)
         document.getElementById('cartDrawer').addEventListener('click', (e) => {
             const plus = e.target.closest('.qty-plus');
             const minus = e.target.closest('.qty-minus');
             const remove = e.target.closest('.remove-btn');
             const clear = e.target.closest('#clearCartBtn');
             const checkout = e.target.closest('#checkoutBtn');

             if (plus || minus) {
                 const itemEl = e.target.closest('.cart-item');
                 const id = itemEl?.dataset.id;
                 const input = itemEl.querySelector('.qty-input');
                 let qty = Number(input.value || 1);
                 qty = plus ? qty + 1 : Math.max(1, qty - 1);
                 input.value = qty;
                 updateCartItemQty(id, qty);
                 renderCart();
             }

             if (remove) {
                 const itemEl = e.target.closest('.cart-item');
                 const id = itemEl?.dataset.id;
                 removeCartItem(id);
             }

             if (clear) {
                 if (confirm('Clear cart?')) clearCart();
             }

             if (checkout) {
                 // placeholder behavior
                 alert('Checkout not implemented in this demo.');
             }
         });

         // also respond to manual qty input changes
         document.getElementById('cartDrawer').addEventListener('change', (e) => {
             if (e.target.classList.contains('qty-input')) {
                 const itemEl = e.target.closest('.cart-item');
                 const id = itemEl?.dataset.id;
                 const qty = Math.max(1, Math.floor(Number(e.target.value) || 1));
                 e.target.value = qty;
                 updateCartItemQty(id, qty);
                 renderCart();
             }
         });

         // Add button behavior (delegated)
         document.addEventListener('click', (e) => {
             const btn = e.target.closest('.add');
             if (!btn) return;
             const article = btn.closest('article[data-id]');
             if (!article) return;

             const id = article.dataset.id;
             const price = Number(article.dataset.price || 0);
             const title = article.querySelector('.title')?.textContent.trim() || id;

             // add and open cart
             addToCart({ id, title, price, qty: 1 });
             showToast('Added to cart', btn);
             updateCartCount();
         );

         // initialise UI count on page load
         document.addEventListener('DOMContentLoaded', updateCartCount);

         // small toast function reused from previous implementation
         function showToast(message, targetBtn) {
             const toast = document.createElement('div');
             toast.className = 'add-toast';
             toast.textContent = message;
             document.body.appendChild(toast);

             if (targetBtn) {
                 const r = targetBtn.getBoundingClientRect();
                 toast.style.left = Math.max(8, r.left + (r.width / 2) - 60) + 'px';
                 toast.style.top = Math.max(8, r.top - 44) + 'px';
             } else {
                 toast.style.left = '50%';
                 toast.style.transform = 'translateX(-50%)';
                 toast.style.top = '20px';
             }

             setTimeout(() => toast.classList.add('visible'), 10);
             setTimeout(() => { toast.classList.remove('visible'); setTimeout(() => toast.remove(), 220); }, 1200);
         }

         // inject toast styles (kept here)
         (function injectToastStyles() {
             const css = `
                         .add-toast {
                             position: fixed;
                             z-index: 1200;
                             left: 50%;
                             top: 16px;
                             transform: translateX(-50%);
                             background: rgba(0,0,0,0.85);
                             color: #fff;
                             padding: 8px 12px;
                             border-radius: 8px;
                             font-weight: 700;
                             font-family: 'Roboto', sans-serif;
                             opacity: 0;
                             transition: opacity .18s, transform .18s;
                             pointer-events: none;
                             box-shadow: 0 8px 20px rgba(0,0,0,0.5);
                         }
                         .add-toast.visible { opacity: 1; transform: translateX(-50%) translateY(0); }
                         @media (max-width:720px) { .add-toast { left: 12px; transform: none; } }
                     `;
             const s = document.createElement('style');
             s.appendChild(document.createTextNode(css));
             document.head.appendChild(s);
         })();
    </script>

</body>
</html>